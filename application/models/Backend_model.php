<?php
 class Backend_model extends CI_Model { function __construct() { parent::__construct(); $this->load->database(); date_default_timezone_set("\101\155\x65\162\151\x63\x61\x2f\114\141\x5f\x50\x61\172"); } public function getID($link) { $this->db->like("\x74\x61\x62\x5f\x6e\x6f\x6d\142\162\x65", $link); $resultado = $this->db->get("\x74\x61\x62\x6c\x61\x5f\155\145\x6e\x75"); if ($resultado->num_rows()) { return $resultado->row(); } else { return false; } } public function getPermisos($idtabla_menu) { $fer = $this->db->query("\123\x45\114\105\103\124\x20\x2a\40\x46\122\x4f\115\40\x70\162\151\x76\x69\x6c\x65\147\x69\x6f\163\12\11\x9\111\x4e\116\105\122\40\112\117\x49\116\x20\x74\x61\x62\154\141\x5f\155\145\156\x75\x20\117\116\40\160\x72\151\x76\151\154\x65\147\x69\157\163\x2e\151\144\x74\x61\142\154\141\x5f\x6d\x65\x6e\x75\x20\75\x20\164\x61\142\154\x61\x5f\155\145\x6e\165\56\151\x64\x74\141\x62\154\141\137\x6d\145\x6e\x75\12\11\11\x57\110\105\122\105\x20\x74\x61\142\x6c\141\x5f\155\145\x6e\165\56\164\141\x62\154\137\145\x73\x74\141\144\x6f\x3d\x27\141\143\164\151\x76\157\47\x20\x41\x4e\104\40\x70\x72\x69\166\151\x6c\145\147\151\x6f\x73\x2e\160\162\x69\x76\151\137\x65\163\x74\x61\144\157\x3d\x27\141\143\164\x69\166\x6f\47\xa\x9\11\101\116\104\40\160\x72\x69\166\x69\154\x65\147\151\x6f\x73\x2e\x69\x64\164\x61\142\x6c\x61\137\155\x65\156\x75\x3d\x27{$idtabla_menu}\47\x20"); if ($fer->num_rows()) { return $fer->row(); } else { return false; } } public function listar_menus_privilegios() { $idusuario = $this->session->userdata("\x75\163\x65\162\137\x69\144"); $a = array(); foreach ($this->db->query("\x53\105\114\105\103\124\x20\x67\x72\x6f\165\160\x5f\151\x64\40\x61\163\x20\x69\144\x74\151\160\157\x5f\165\163\x75\141\x72\x69\x6f\x20\x46\x52\117\115\40\x75\163\145\x72\163\x5f\x67\162\157\x75\x70\163\40\x57\110\x45\x52\x45\x20\165\x73\145\x72\x5f\x69\x64\x3d\x27{$idusuario}\x27\40")->result() as $juan) { $id = $juan->idtipo_usuario; $fer = $this->db->query("\x53\x45\x4c\105\x43\x54\40\52\40\x46\x52\x4f\x4d\x20\164\141\x62\x6c\141\x5f\x6d\145\156\x75\xa\11\11\11\111\x4e\x4e\x45\122\x20\112\x4f\x49\x4e\x20\160\x72\x69\166\151\x6c\x65\147\151\157\x73\40\117\116\40\x70\x72\151\166\151\x6c\x65\147\151\157\x73\x2e\151\144\x74\x61\x62\x6c\x61\137\155\145\x6e\x75\40\x3d\x20\164\141\142\x6c\x61\x5f\155\145\156\x75\x2e\151\x64\164\x61\142\x6c\x61\137\155\145\156\165\12\x9\11\11\x57\x48\x45\122\105\x20\x74\141\142\154\141\x5f\x6d\145\156\x75\x2e\x74\x61\x62\x6c\x5f\x65\x73\x74\141\x64\x6f\75\47\141\x63\x74\x69\166\x6f\47\x20\x41\116\104\x20\160\x72\x69\x76\151\154\x65\147\151\x6f\x73\56\160\162\x69\166\151\x5f\x65\163\164\141\x64\x6f\x3d\47\x61\x63\164\x69\166\157\x27\40\101\116\104\40\160\162\151\x76\x69\154\x65\x67\151\x6f\x73\x2e\x67\x72\x6f\x75\160\x73\137\151\144\75\x27{$id}\x27\12\11\11\x9\117\122\104\x45\x52\40\x42\x59\40\164\x61\x62\154\141\137\155\145\x6e\x75\x2e\151\x64\x74\x61\x62\x6c\x61\x5f\x6d\x65\156\165\40\x41\x53\x43\x20")->result(); foreach ($fer as $obj) { $a[$obj->tab_nombre] = $obj->tab_nombre; } } return $a; } } ?>